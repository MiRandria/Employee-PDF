<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" th:href="@{/styles/bootstrap.min.css}">
    <link rel="stylesheet" th:href="@{/styles/index.css}">
    <script th:src="@{/scripts/bootstrap.bundle.min.js}" defer></script>
</head>
<body>
<header th:replace="~{components/navbar.html :: navbar('List of employees')}"></header>
<div class="container py-5">
    <div>
        <a href="/employee/create">
            <button class="btn btn-success">create new employee</button>
        </a>
        <a href="/employee/filters/clear">
            <button class="btn btn-success">clear filters</button>
        </a>
        <a href="/employee/list/csv">
            <button class="btn btn-success">export</button>
        </a>
    </div>
    <!--        filters-->
    <div class="container mt-3">
        <form action="/employee/list" class="row g-3" method="get">
            <div class="col-4">
                <label for="firstName" class="form-label">First name</label>
                <input type="text" th:value="*{session.firstNameFilter}" class="form-control" name="firstName"
                       id="firstName">
            </div>
            <div class="col-4">
                <label for="lastName" class="form-label">Last name</label>
                <input type="text" th:value="*{session.lastNameFilter}" name="lastName" class="form-control"
                       id="lastName">
            </div>
            <div class="col-4">
                <label for="sex" class="form-label">Sex</label>
                <select id="sex" th:value="*{session.sexFilter}" name="sex" class="form-select">
                    <option selected value="">Chose your sex</option>
                    <option th:each="sex : *{T(com.example.prog4.repository.entity.enums.Sex).values()}"
                            th:value="*{sex}"
                            th:text="*{sex}"></option>
                </select>
            </div>
            <div class="col-4">
                <label for="beginEntrance" class="form-label">Begin Entrance</label>
                <input type="date" th:value="*{session.beginEntranceFilter}" name="beginEntrance" class="form-control"
                       id="beginEntrance">
            </div>
            <div class="col-4">
                <label for="endingEntrance" class="form-label">Begin Entrance</label>
                <input type="date" th:value="*{session.endingEntranceFilter}" name="endingEntrance" class="form-control"
                       id="endingEntrance">
            </div>
            <div class="col-4">
                <label for="beginDeparture" class="form-label">Begin Entrance</label>
                <input type="date" th:value="*{session.beginDepartureFilter}" name="beginDeparture" class="form-control"
                       id="beginDeparture">
            </div>
            <div class="col-4">
                <label for="endingDeparture" class="form-label">Begin Entrance</label>
                <input type="date" th:value="*{session.endingDepartureFilter}" name="endingDeparture"
                       class="form-control"
                       id="endingDeparture">
            </div>
            <div class="col-4">
                <label for="page" class="form-label">Page</label>
                <input type="number" th:value="*{session.pageFilter}" min="1" name="page" class="form-control"
                       id="page">
            </div>
            <div class="col-4">
                <label for="perPage" class="form-label">Per page</label>
                <input type="number" th:value="*{session.perPageFilter}" min="1" name="perPage" class="form-control"
                       id="perPage">
            </div>
            <div class="col-4">
                <label for="orderBy" class="form-label">OrderBy</label>
                <select id="orderBy" th:value="*{session.orderByFilter}" name="orderBy" class="form-select">
                    <option th:each="by : *{T(com.example.prog4.model.enums.EmployeeSortField).values()}"
                            th:value="*{by}"
                            th:text="*{by}"></option>
                </select>
            </div>
            <div class="col-4">
                <label for="orderDirection" class="form-label">orderDirection</label>
                <select id="orderDirection" th:value="${session.orderDirectionFilter}" name="orderBy"
                        class="form-select">
                    <option value="ASC">ASC</option>
                    <option value="DESC">DESC</option>
                </select>
            </div>
            <div class="my-3 col-12">
                <button type="submit" class="btn btn-primary">Filter</button>
            </div>
        </form>
    </div>
    <div class="container">
        <table class="table table-striped table-hover">
            <thead>
            <tr>
                <th>Image</th>
                <th>Last name</th>
                <th>First name</th>
                <th>Sex</th>
                <th>positions</th>
                <th>Entrance date</th>
                <th>Departure date</th>
                <th>Actions</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="employee : *{employees}">
                <td><img class="img-list" th:src="*{employee.stringImage}" alt="no image"></td>
                <td><p th:text="*{employee.lastName}"></p></td>
                <td><p th:text="*{employee.firstName}"></p></td>
                <td><p th:text="*{employee.sex.toString()}"></p></td>
                <td><p th:each="position : *{employee.positions}" th:text="*{position.name}"
                       class="p-2 rounded-3 bg-body m-2"></p></td>
                <td><p th:text="*{employee.entranceDate.toString()}"></p></td>
                <td><p th:text="*{employee.departureDate.toString()}"></p></td>
                <td>
                    <a th:href="'/employee/edit/'+ *{employee.id}">
                        <button class="btn btn-primary">edit</button>
                    </a>
                    <a th:href="'/employee/show/'+*{employee.id}">
                        <button class="btn btn-primary">show</button>
                    </a>
                </td>
            </tr>
            </tbody>
        </table>
    </div>
</div>
<footer th:replace="~{components/navbar.html :: footer}"></footer>
</body>
</html>